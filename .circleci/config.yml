# Javascript Node CircleCI 2.0 configuration file
version: 2
jobs:
  build:
    working_directory: ~/emerald
    docker:
      - image: circleci/node:7.10
    steps:
      - checkout
      - run: cd ./back-end && npm install && node migration.js up
      # - run: 
      #   - name: start the back-end
      #   - command: npm start
  test:
    working_directory: ~/emerald
    docker: 
      - image: circleci/node:7.10
    steps:
      - checkout
      - run: cd ./back-end && npm install && npm run test 

workflows:
  version: 2
  build_and_test:
    jobs: 
      - build:
          filters:
            branches:
              only: amelieykw_backend
      - test:
          requires:
            - build
          filters:
            branches:
              only: amelieykw_backend



